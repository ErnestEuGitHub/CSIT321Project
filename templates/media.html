{% extends "layout.html" %}

{% block content %}

<style>
    .custom-dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-menu {
        display: none;
        position: absolute;
        background-color: #fff;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        border-radius: 4px;
        padding: 8px 0;
        z-index: 1000;
        left: 50%;
        /* Set to 50% */
        transform: translateX(-50%);
        /* Shift back by half of its own width */
    }

    .custom-dropdown:hover .dropdown-menu {
        display: block;
    }

    .dropdown-item {
        display: block;
        width: 100%;
        padding: 8px;
        clear: both;
        font-weight: 400;
        text-decoration: none;
        color: #333;
        text-align: inherit;
        white-space: nowrap;
        background-color: transparent;
        border: 0;
    }

    .dropdown-item:hover {
        background-color: #f5f5f5;
    }
</style>

<div class="container h-100 navbarcontentpadding">
    <div class="d-flex justify-content-between">
        <label class="fs-4 fw-bold my-4">Media</label>
        <a href="/createMedia/{{projID}}/{{tourID}}" class="btn btn-primary my-4" role="button"
            aria-disabled="true">Create Media</a>
    </div>
    {% for n in newsBlock %}
    <div class="card mb-3">
        <div class="card-body">
            <div class="d-flex justify-content-between" id="{{ n['newsID'] }}">
                <label>{{ n['newsTitle'] }}</label>
                <div class="custom-dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" aria-expanded="true">
                        Edit
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/editMedia/{{projID}}/{{tourID}}/{{ n['newsID'] }}">Edit</a>
                        </li>
                        <li><a class="dropdown-item" href="/deleteMedia/{{projID}}/{{tourID}}/{{ n['newsID'] }}"
                            >Delete</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<script>
    // $(document).ready(function () {
    //     $('.dropdown-item').click(function () {
    //         var closestDropdownItem = $(this).closest('.dropdown-item');
    //         // Now you can work with the closest dropdown-item element
    //         // For example, you can access its attributes or perform other operations
    //     });
    // });

    // function deleteMedia(projID, tourID, closestDropdownItem) {
    //     console.log(projID);
    //     console.log(tourID);
    //     console.log(closestDropdownItem);

    //     fetch('/deleteMedia/' + projID + '/' + tourID + '/' + closestDropdownItem.id, {
    //         method: 'POST',
    //     })
    //         .then(response => { })
    //         .then(data => {
    //             // Handle the response data as needed
    //             console.log("News deleted successfully");
    //         })
    //         .catch(error => {
    //             console.error('Error:', error);
    //             // Handle errors
    //         });
    // }
</script>
{% endblock %}